{% extends "base.html" %}
{% block content %}

<div class="row issue-bgd centre-elem">

	<div class="col-sm-10 col-md-9">
		<div class="centre-elem">
			{% if issue.issue_type == "Bug" %}
			<i class="fas fa-bug"> {{ issue.name }}</i>
			{% else %}
			<i class="fas fa-check-double"> {{ issue.name }}</i>
			{% endif %}
		</div>
		<div class="row">
			<div class="col-sm-12 col-md-4 col-lg-4 text-center">
				<i class="far fa-eye"> {{ issue.views }}</i>
			</div>
			<div class="col-sm-12 col-md-4 col-lg-4 text-center">
				<i class="fas fa-thumbs-up"> {{ issue.votes }}</i>
			</div>
			{% if issue.status == "Draft" %}
			<div class="col-sm-12 col-md-4 col-lg-4 text-center">
				<p class="boldtext"><span class="draft-bgd status-style">{{ issue.status }} </span></p>
			</div>
			{% elif issue.status == "ToDo" %}
			<div class="col-sm-12 col-md-4 col-lg-4 text-center">
				<p class="boldtext"><span class="todo-bgd status-style">{{ issue.status }}</span></p>
			</div>
			{% elif issue.status == "InDevelopment" %}
			<div class="col-sm-12 col-md-4 col-lg-4 text-center">
				<p class="boldtext"><span class="indev-bgd status-style">{{ issue.status }}</span></p>
			</div>
			{% elif issue.status == "Fixed" %}
			<div class="col-sm-12 col-md-4 col-lg-4 text-center">
				<p class="boldtext"><span class="fixed-bgd status-style">{{ issue.status }}</span></p>
			</div>
			{% elif issue.status == "InTest" %}
			<div class="col-sm-12 col-md-4 col-lg-4 text-center">
				<p class="boldtext"><span class="intest-bgd status-style">{{ issue.status }}</span></p>
			</div>
			{% elif issue.status == "Done" %}
			<div class="col-sm-12 col-md-4 col-lg-4 text-center">
				<p class="boldtext"><span class="done-bgd status-style">{{ issue.status }}</span></p>
			</div>

			{% else %}
			<div class="col-sm-12 col-md-4 col-lg-4 text-center">
				<p class="boldtext card-text"><span class="draft-bgd status-style">Issue: {{ issue.status }}</span></p>
			</div>
			{% endif %}
		</div>
		<div class="row">
			<div class="col-xs-9">
				<p><strong>Description:</strong></br>{{ issue.description }}</p>
				<p><strong>Steps To Reproduce:</strong></br>{{ issue.step_to_Reproduce }}</p>
				<div class="row">
			        <div class="col-sm-12 col-md-12 col-lg-6">
                        <p><strong>Expected Results:</strong></br>{{ issue.expected_Results }}</p>
			        </div>
                    <div class="col-sm-12 col-md-12 col-lg-6">
				        <p><strong>Actual Results:</strong></br>{{ issue.actual_Results }}</p>
                    </div>
				</div>        
				    <p><span class="boldtext"><strong></br>Created on:</strong></span> {{ issue.published_date }} </p>

			</div>
		</div>
        <div class="">
            <div class="">
                {% if issue.issue_type == "Bug" %}
                    <p><strong>Vote for me.</strong> The Bug with most votes is fixed first!!</p>
                {% else %}
                    {% if issue.votes < 100 %}
                        <p><strong>Vote Now!.</strong> I have {{ issue.votes }} of the 100 votes needed for development to begin. Help get me a step closer to development by voting now</p>
                     {% else %}
                        <p><strong>Vote Suspended</strong> I have reached my voting goal and develpment will begin</p>
                     {% endif %}       
                {% endif %}
            </div>
        </div>
        <div class="card-footer text-center">
			{% if issue.issue_type == "Bug" %}
				<a href="{% url 'increment_vote' issue.id %}" class="btn btn-success">Vote</a></p>
			{% else %}
			<form method="post" action="{% url 'add_to_cart' issue.id %}">
				{% csrf_token %}
				<div class="input-group form-style">
					<input name="quantity" type="number" min="1" max="999" class="form-control" placeholder="Number of Votes">
					<span class="input-group-btn">
                        <button class="btn btn-success" type="submit">Vote</button>
                    </span>
				</div>
			</form>
			{% endif %}
		</div>
		<div class="row centre-elem">
			<a href="{% url 'issues' %}" class="btn btn-default">Back to Issues</a>
			<a href="{% url 'edit_issue' issue.id %}" class="btn btn-default">Edit Issue</a>
            <a href="{% url 'add_comment' issue.id %}" class="btn btn-default">Add Comment</a>
		</div>
        <div class="row">
            <p>Comment:</p> 
                {% for comment in issue.comments.all %}
                    <p>Created:{{ comment.comment_date }}</p>
                    <p>Comment:{{ comment.body }}</p>
                {% endfor %}
        </div>
	</div>
    
</div>

{% endblock %}